{% extends 'base-user.html' %}
{% block title %}Cotizaciones{% endblock %}

{% block content %}

<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link rel="stylesheet" href="{{url_for('static',filename='css/components/cotizaciones.css')}}">

<div class="content-cuadro">
    <div class="cuadro">
        <!-- Titulo -->
        <div>
            <h1 class="titulo">Solicitudes</h1>
        </div>

        <!-- PestaÃ±as -->

        <div class="tabs">
            
                <li class="option option-active" id="pendientes-tab" onclick="mostrarTabla('pendientes')">
                     Cotizaciones Pendientes
                </li>
                <li class="option" id="completadas-tab" onclick="mostrarTabla('completadas')" >
                    Cotizaciones Completadas
                </li>
            
        </div>

        <!-- Tabla de Cotizaciones Pendientes -->
        <div id="tabla-pendientes" class="tabla-cotizaciones">
            <table class="table is-bordered is-hoverable is-dark has-text-white">
                <thead>
                    <tr>
                        <th>ID Solicitud</th>
                        <th>Predio</th>
                        <th>Solicitante</th>
                        <th>Servicio</th>
                        <th>Cotizar</th>
                    </tr>
                </thead>
                <tbody>
                    {% for solicitudp in cotizaciones_pendientes %}
                    <tr>
                        <td>{{ solicitudp.id_solicitud }}</td>
                        <td>{{ solicitudp.descripcion_predio }}</td>
                        <td>{{ solicitudp.nombre_solicitante }}</td>
                        <td>{{ solicitudp.descripcion_servicio }}</td>
                        <td>
                            <a href="{{ url_for('solicitud_cotizacion.cotizar', id_solicitud=solicitudp.id_solicitud, estado="
                                Pendiente") }}" class="button is-link is-small" data-toggle="tooltip" title="Cotizar">
                                <span class="material-icons">
                                    monetization_on
                                </span>
                            </a>
                            <button id="btnno" class="button is-link is-small" data-toggle="tooltip" title="Cotizar"
                                onclick="mostrarPopup('popup-{{ solicitudp.id_solicitud }}')">
                                <span class="material-icons">
                                    monetization_on
                                </span>
                            </button>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <!-- Tabla de Cotizaciones Completadas -->
        <div id="tabla-completadas" class="tabla-cotizaciones" style="display: none;">
            <table class="table is-bordered is-hoverable">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Personal</th>
                        <th>Fecha</th>
                        <th>Importe</th>
                        <th>Estado</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    {% for cotizacion in cotizaciones_completadas %}
                    <tr>
                        <td>{{ cotizacion.id_solicitud }}</td>
                        <td>{{ cotizacion.id_personal }}</td>
                        <td>{{ cotizacion.fecha_cotizacion }}</td>
                        <td>{{ cotizacion.importe }}</td>
                        <td>Completado</td>
                        <td>
                            <a href="{{ url_for('solicitud_cotizacion.cotizar', id_solicitud=cotizacion.id_solicitud, estado="
                                Realizada") }}" class="button is-link is-small" data-toggle="tooltip"
                                title="Ver Detalles">
                                <span class="material-icons">
                                    visibility
                                </span>
                            </a>
                            <form class="btn_download" action="{{ url_for('boleta.generar_pdf') }}" method="POST">
                                <button type="submit" class="button is-link is-small" data-toggle="tooltip"
                                    title="Descargar boleta">
                                    <input type="hidden" name="descargar__id_solicitud"
                                        value="{{ cotizacion.id_solicitud }}">
                                    <span class="material-icons">
                                        download
                                    </span>
                                </button>
                            </form>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>



<script src="{{ url_for('static', filename='js/cotizaciones.js') }}"></script>

{% endblock %}